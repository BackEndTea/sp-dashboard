services:
  Surfnet\ServiceProviderDashboard\Infrastructure\DashboardBundle\Controller\SupplierController:
    arguments:
      - '@tactician.commandbus'

  dashboard.monolog.json_formatter:
    class: Surfnet\ServiceProviderDashboard\Infrastructure\DashboardBundle\Monolog\Formatter\JsonFormatter

  surfnet.dashboard.repository.supplier:
    class: Surfnet\ServiceProviderDashboard\Infrastructure\DashboardBundle\Repository\SupplierRepository
    factory: ['@doctrine', 'getRepository']
    arguments: [Surfnet\ServiceProviderDashboard\Domain\Entity\Supplier]

  surfnet.dashboard.command_handler.create_supplier:
    class: Surfnet\ServiceProviderDashboard\Application\CommandHandler\Supplier\CreateSupplierCommandHandler
    public: true
    arguments:
      - '@surfnet.dashboard.repository.supplier'
      - '@validator'
    tags:
      - { name: tactician.handler, command: Surfnet\ServiceProviderDashboard\Application\Command\Supplier\CreateSupplier }

  dashboard.service.admin_switcher:
    class: Surfnet\ServiceProviderDashboard\Infrastructure\DashboardBundle\Service\AdminSwitcherService
    arguments:
      - '@session'
      - '@surfnet.dashboard.repository.supplier'

  surfnet.dashboard.command_handler.select_supplier:
    class: Surfnet\ServiceProviderDashboard\Infrastructure\DashboardBundle\CommandHandler\Supplier\SelectSupplierCommandHandler
    public: true
    arguments:
      - '@dashboard.service.admin_switcher'
    tags:
      - { name: tactician.handler, command: Surfnet\ServiceProviderDashboard\Infrastructure\DashboardBundle\Command\Supplier\SelectSupplierCommand }

  dashboard.twig.admin_switcher_extension:
    class: Surfnet\ServiceProviderDashboard\Infrastructure\DashboardBundle\Twig\AdminSwitcherExtension
    tags: [twig.extension]
    autowire: true
